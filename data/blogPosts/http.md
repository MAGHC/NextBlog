### 프록시 캐시

한국에 있는 여러 클라이언트가 미국의 원서버에 접근 다들 기다려야됨

그래서 프록시 캐시라는것을 도입

한국 어딘가에다가 프록시 캐시서버를 둔다. 요청을 하면 미국원서버로 바로 오는게 아니고 프록시 캐시 서버에 먼저 접근하게끔.

그래서 응답이 빨라짐

cdn 서비스라고함

프라이빗 캐시 : 로컬에저장

퍼블릭 캐시 : 프록시 캐시 서버에 저장

Cache-Control:Public

응답이 public 캐시에 저장되어도됨

:private

응답이 해당 사용자만을 위한 것임 , private 캐시에 저장해야됨

:s-maxage

프록시 캐시에만 적용되는 max-age

Age:60(HTTP헤더)

오리진 서버에서 응답후 프록시 캐시 내에 머문 시간

### 캐시 무효화

Cache-Control

확실한 캐시 무효화 응답

캐시를 적용안하면 안되는거 아님? ⇒ 웹브라우저가 get요청 인경우 임의로 cache 하기도함

:no-cache, no-store , must-revalidate

Pragma:no-cache (http1.0 하위 호환 )

(이페이지는 진짜 캐시가되면안된 다 하면 이걸 다넣으면됨)

ex) 사용자의 통장 잔고 ⇒ 계속 갱신되기에 cache no

:no-cache

데이터는 캐시해도 되지만, 항상 원 서버에 검증하고 사용

:no-store

데이터에 민감한 정보가 있으므로 저장하면 안됨

(메모리에서 사용하고 최대한 빨리 삭제)

:must-revalidate

캐시만료후 최초 조회시 원서버에 검증해야됨

원서버 접근실패시 반드시 오류 발생 - 504(gateway timeout)

must-revalidate 는 캐시 유효 시간이라면 캐시를 사용함

### 노캐시랑 머스트 리발리데이트 차이점

머스트는 만료후 최초 조회시.

노캐시는 항상 검증

그러면 항상검증하지 뭐하러 머스트씀? ⇒

노캐시의 경우 원서버에 접근할수없는경우 캐시 서버 설정에 따라 캐시 데이터 반환 (error or 200ok 오류보단 오래된 데이터라도 ㄱ ) 머스트의 경우에는 무조건 오류 504 gateway Timeout
